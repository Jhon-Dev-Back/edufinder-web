# Imagen base con Java 11
FROM eclipse-temurin:11-jdk

# Directorio de trabajo dentro del contenedor
WORKDIR /opt/payara

# Copiamos Payara Server desde el proyecto al contenedor
COPY Payara_Server /opt/payara

# Copiamos tu archivo WAR generado por Maven
COPY target/edufinder-duver-1.0-SNAPSHOT.war /opt/payara/glassfish/domains/domain1/autodeploy/

# Exponemos el puerto HTTP de Payara
EXPOSE 8080

# Comando para arrancar Payara
CMD ["java", "-jar", "/opt/payara/glassfish/modules/admin-cli.jar", "start-domain", "--verbose", "domain1"]
